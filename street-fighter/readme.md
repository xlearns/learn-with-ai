# 总结

## index 文件

- window.addEventListener 的{ once: true }选项
  - 在事件首次发生并触发回调函数后，该监听器将被自动删除，以确保不会重复触发相同的事件。

## StreetFighterGame 文件

- requestAnimationFrame 调用函数 this 指向
  - requestAnimationFrame 第一个参数是一个回调函数，它会在下一次浏览器重绘之前执行。这个回调函数接受一个 DOMHighResTimeStamp 参数，表示此次重绘开始时的时间戳
  - 如果没有通过 bind 则默认指向 window / undefined
    - "use strict" -> undefined
  - 可以通过 bind 修改 this 指向

## util 文件

- setTransform
  - 用于将当前绘图的坐标系进行变换，从而实现对画布上已有元素的位置、大小和旋转等属性的修改
    - ctx.setTransform(a, b, c, d, e, f);
    - a 和 d 是缩放因子，b 和 c 是切变因子，e 和 f 是平移量
    - b 和 c 分别表示水平方向和竖直方向的切变量。切变量（shearing coefficient）描述了一个形状相对于坐标系的倾斜程度。在二维图形中，切变变换通常使用一个平行四边形来描述，它可以将一个正方形变成一个菱形或梯形。当 b 和 c 为零时，切变变换不会对形状产生影响。
    - `ctx.setTransform(2, 0, 0, 2, 50, 0)`将画布的坐标系放大两倍，并向右移动 50 像素
  - 与 restore 的区别
- ctx.content('2d')的 imageSmoothingEnabled 属性
  - 用于控制图像是否进行平滑处理（抗锯齿）
    - 在绘制图像时，如果图像被缩放、旋转或者移动到非整数坐标位置，浏览器默认会对图像进行平滑处理以消除锯齿边缘。这种平滑处理会导致图像边缘变得模糊，并且在某些情况下可能不是所期望的结果。
    - 属性设置为 false 时，浏览器将不再进行平滑处理，这样可以获得更清晰、更锐利的图像
    - imageSmoothingEnabled 属性只能在绘制图像之前设置才有效。因此，在设置画布尺寸之前设置它是非常重要的
    - 为什么浏览器的抗锯齿会导致边缘模糊
      - 浏览器的抗锯齿技术通常是通过对图像进行插值来实现的。插值是一种从已知数据点推断出未知数值的方法，通常用于对离散数据进行平滑处理。在图像中，浏览器将已知像素的颜色值与未知像素的颜色值进行插值，以生成新的像素颜色值。然而，在对图像进行缩放、旋转或者移动到非整数坐标位置时，由于像素点是正方形的，缩小或拉伸后会呈现锯齿状的边缘，这通常被称为锯齿状失真（aliasing）。为了消除这种失真，浏览器在做插值操作时会使用平均值或加权平均值等方法，将相邻像素颜色混合在一起，以达到平滑效果。但是，这种平滑处理也会导致图像边缘变得模糊，从而影响图像的清晰度和细节表现。

## BattleScene 文件
